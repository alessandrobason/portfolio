<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset-"UTF-8" />
        <title>Alessandro Bason</title>

        <link rel="preconnect" href="https://fonts.googleapis.com"> 
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        {% for f in fonts %}
        <link href="https://fonts.googleapis.com/css2?family={{f}}&display=swap" rel="stylesheet">
        {% endfor %}

        <link rel="icon" type="image/jpg" href="/favicon.ico"/>

        <link rel="stylesheet" href="/css/header.css">
        <link rel="stylesheet" href="/css/global.css">
        <link rel="stylesheet" href="/css/footer.css">
    </head>

    <body>
        <div id="page-background">
            <div id="page-filter"></div>
        </div>

        <div class="carousel">
            <div id="carousel-container">
                <div class="arrow-left" onclick="image_prev()">
                    {% include "arrow-left.svg" %}
                </div>
                <img id="carousel-image" class="elevated">
                <div class="arrow-right" onclick="image_next()">
                    {% include "arrow-right.svg" %}
                </div>
            </div>
        </div>

        <main id="main">
            {% include "header.njk" %}
            <div class="content-container">
                <div class="content-spacing"></div>

                <div class="content-outer" style="flex-basis: {{helpers.getMaxWidthWithPadding()}}px; max-width: {{helpers.getMaxWidthWithPadding()}}px">
                    <div class="content">
                        <div id="main-content" style="width: 100%">
                            {{ content | safe }}
                        </div>
                        {% include "footer.njk" %}
                    </div>
                </div>

                <div class="content-spacing"></div>
            </div>
        </main>
    </body>

    <script>
        // detect if the user is on mobile
        let has_touchscreen = false;
        if ("maxTouchPoints" in navigator) {
            has_touchscreen = navigator.maxTouchPoints > 0;
        }
        else if ("msMaxTouchPoints" in navigator) {
            has_touchscreen = navigator.msMaxTouchPoints > 0;
        } 
        // thank you mdn jesus christ
        else {
            const mQ = matchMedia?.("(pointer:coarse)");
            if (mQ?.media === "(pointer:coarse)") {
                hasTouchScreen = !!mQ.matches;
            } 
            else if ("orientation" in window) {
                hasTouchScreen = true; // deprecated, but good fallback
            } 
        }

        if (has_touchscreen) {
            let stylesheet = document.createElement("link");
            stylesheet.rel = "stylesheet";
            stylesheet.href = "/css/mobile.css";

            document.body.appendChild(stylesheet);
        }

    </script>
</html>